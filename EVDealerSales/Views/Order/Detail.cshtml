@using EVDealerSales.BO.DTOs.OrderDTOs
@model OrderResponseDto

@{
    ViewData["Title"] = "Order";
}

<h2>Order</h2>

<dl class="row">
    <dt class="col-sm-3">Customer</dt>
    <dd class="col-sm-9">@Model.CustomerName</dd>

    <dt class="col-sm-3">Staff</dt>
    <dd class="col-sm-9">@Model.StaffName</dd>

    <dt class="col-sm-3">Order Date</dt>
    <dd class="col-sm-9">@Model.OrderDate.ToString("yyyy-MM-dd")</dd>

    <dt class="col-sm-3">Status</dt>
    <dd class="col-sm-9">@Model.Status</dd>

    <dt class="col-sm-3">Discount</dt>
    <dd class="col-sm-9">
        @if (!string.IsNullOrWhiteSpace(Model.DiscountType))
        {
            @($"{Model.DiscountType}: {(Model.DiscountValue?.ToString("C") ?? "-")}")
        }
        else
        {
            @("-")
        }
        @if (!string.IsNullOrWhiteSpace(Model.DiscountNote))
        {
            <div class="text-muted">@Model.DiscountNote</div>
        }
    </dd>

    <dt class="col-sm-3">Subtotal</dt>
    <dd class="col-sm-9">@Model.SubtotalAmount.ToString("C")</dd>

    <dt class="col-sm-3">Total</dt>
    <dd class="col-sm-9">@Model.TotalAmount.ToString("C")</dd>
</dl>

@if (Model.Items is not null)
{
    <h4>Item</h4>
    <dl class="row">
        <dt class="col-sm-3">Vehicle</dt>
        <dd class="col-sm-9">@Model.Items.Name</dd>

        <dt class="col-sm-3">Quantity</dt>
        <dd class="col-sm-9">@Model.Items.Quantity</dd>

        <dt class="col-sm-3">Unit Price</dt>
        <dd class="col-sm-9">@Model.Items.UnitPrice.ToString("C")</dd>

        <dt class="col-sm-3">Line Total</dt>
        <dd class="col-sm-9">@Model.Items.LineTotal.ToString("C")</dd>
    </dl>
}

<div class="mb-3">
    <a asp-action="Index" class="btn btn-secondary">Back</a>
</div>

<form asp-action="Delete" asp-route-id="@Model.Id" method="post">
    @Html.AntiForgeryToken()
    <button type="submit" class="btn btn-outline-danger" onclick="return confirm('Delete this order?');">Delete</button>
</form>