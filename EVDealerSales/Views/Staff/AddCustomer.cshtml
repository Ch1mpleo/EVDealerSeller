@model EVDealerSales.BO.DTOs.CustomerDTOs.CreateCustomerDto
@{
    ViewData["Title"] = "Add Customer";
    var email = Context.Request.Query["email"].ToString();
    var vehicleId = Context.Request.Query["vehicleId"].ToString();
}

<link rel="stylesheet" href="~/css/employee.css" />

<div class="employee-container">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-6 col-md-8">
                <!-- Header Card -->
                <div class="employee-card mb-4">
                    <div class="employee-card-body text-center">
                        <div class="mb-3">
                            <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="#0070f3" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                                <circle cx="12" cy="7" r="4"></circle>
                            </svg>
                        </div>
                        <h2 class="text-white mb-2" style="font-size: 1.5rem; font-weight: 600;">New Customer Registration</h2>
                        <p class="text-muted mb-0" style="font-size: 0.875rem; color: #999;">Please provide customer information to continue</p>
                    </div>
                </div>

                <!-- Form Card -->
                <div class="employee-card">
                    <div class="employee-card-body">
                        <form asp-action="AddCustomer" asp-controller="Staff" method="post" autocomplete="off" id="addCustomerForm">
                            @* Store vehicleId in hidden input *@
                            <input type="hidden" name="vehicleId" value="@vehicleId" />

                            <!-- Name Fields Row -->
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group-modern">
                                        <label asp-for="FirstName" class="form-label-modern">First Name</label>
                                        <input asp-for="FirstName" class="form-control-modern" placeholder="John" />
                                        <span asp-validation-for="FirstName" class="text-danger" style="font-size: 0.75rem; margin-top: 0.25rem; display: block;"></span>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group-modern">
                                        <label asp-for="LastName" class="form-label-modern">Last Name</label>
                                        <input asp-for="LastName" class="form-control-modern" placeholder="Doe" />
                                        <span asp-validation-for="LastName" class="text-danger" style="font-size: 0.75rem; margin-top: 0.25rem; display: block;"></span>
                                    </div>
                                </div>
                            </div>

                            <!-- Email Field -->
                            <div class="form-group-modern">
                                <label asp-for="Email" class="form-label-modern">Email Address</label>
                                @if (string.IsNullOrEmpty(email))
                                {
                                    <input asp-for="Email" class="form-control-modern" placeholder="customer@example.com" />
                                }
                                else
                                {
                                    <input asp-for="Email" class="form-control-modern" value="@email" readonly style="background: #0a0a0a; cursor: not-allowed;" />
                                }
                                <span asp-validation-for="Email" class="text-danger" style="font-size: 0.75rem; margin-top: 0.25rem; display: block;"></span>
                            </div>

                            <!-- Phone Field -->
                            <div class="form-group-modern">
                                <label asp-for="Phone" class="form-label-modern">Phone Number</label>
                                <input asp-for="Phone" class="form-control-modern" placeholder="+1 (555) 123-4567" />
                                <span asp-validation-for="Phone" class="text-danger" style="font-size: 0.75rem; margin-top: 0.25rem; display: block;"></span>
                            </div>

                            <!-- Address Field -->
                            <div class="form-group-modern">
                                <label asp-for="Address" class="form-label-modern">Address</label>
                                <input asp-for="Address" class="form-control-modern" placeholder="123 Main St, City, State 12345" />
                                <span asp-validation-for="Address" class="text-danger" style="font-size: 0.75rem; margin-top: 0.25rem; display: block;"></span>
                            </div>

                            <!-- Submit Button -->
                            <button type="submit" class="btn-modern w-100" style="height: 44px; justify-content: center; margin-top: 0.5rem;">
                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                                    <circle cx="12" cy="7" r="4"></circle>
                                </svg>
                                Add Customer & Continue
                            </button>
                        </form>
                    </div>
                </div>

                <!-- Info Card -->
                <div class="employee-card mt-3">
                    <div class="employee-card-body">
                        <div style="display: flex; gap: 0.75rem; align-items: flex-start;">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#0070f3" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="flex-shrink: 0; margin-top: 2px;">
                                <circle cx="12" cy="12" r="10"></circle>
                                <line x1="12" y1="16" x2="12" y2="12"></line>
                                <line x1="12" y1="8" x2="12.01" y2="8"></line>
                            </svg>
                            <div>
                                <p class="text-white mb-1" style="font-size: 0.875rem; font-weight: 500;">Next Steps</p>
                                <p class="text-muted mb-0" style="font-size: 0.75rem; line-height: 1.5; color: #999;">
                                    After adding the customer information, you'll be redirected to schedule a test drive appointment.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
}
