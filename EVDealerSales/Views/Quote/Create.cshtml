@using EVDealerSales.BO.DTOs.QuoteDTOs
@model QuoteDto

@{
    ViewData["Title"] = "Create Quote";
    var customers = ViewBag.Customers as List<Microsoft.AspNetCore.Mvc.Rendering.SelectListItem>;
    var vehicles = ViewBag.Vehicles as List<Microsoft.AspNetCore.Mvc.Rendering.SelectListItem>;
    var statusItems = ViewBag.StatusItems as List<Microsoft.AspNetCore.Mvc.Rendering.SelectListItem>;
}

<link rel="stylesheet" href="~/css/employee.css" />

<div class="employee-container">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-md-10 col-lg-8">
                <div class="mb-3">
                    <a href="@Url.Action("Index", "Quote")" class="btn-modern-secondary">
                        <i class="bi bi-arrow-left"></i>
                        Back to Quotes
                    </a>
                </div>

                <div class="employee-card mb-4">
                    <div class="employee-card-body text-center">
                        <div class="mb-3">
                            <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="#0070f3" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z" />
                                <polyline points="14 2 14 8 20 8" />
                                <line x1="12" y1="18" x2="12" y2="12" />
                                <line x1="9" y1="15" x2="15" y2="15" />
                            </svg>
                        </div>
                        <h2 class="text-white mb-2" style="font-size: 1.5rem; font-weight: 600;">Create New Quote</h2>
                        <p class="text-muted mb-0" style="font-size: 0.875rem; color: #999;">Generate a quote for a customer</p>
                    </div>
                </div>

                <div class="employee-card">
                    <div class="employee-card-body">
                        <form asp-action="Create" method="post">
                            @Html.AntiForgeryToken()

                            <div class="row g-3">
                                <div class="col-md-6">
                                    <div class="form-group-modern">
                                        <label asp-for="CustomerId" class="form-label-modern">
                                            <i class="bi bi-person me-2" style="color: #0070f3;"></i>
                                            Customer
                                        </label>
                                        <select asp-for="CustomerId" class="form-control-modern" asp-items="customers">
                                            <option value="">Select a customer</option>
                                        </select>
                                        <span asp-validation-for="CustomerId" class="text-danger" style="font-size: 0.75rem; margin-top: 0.25rem; display: block;"></span>
                                    </div>
                                </div>

                                <div class="col-md-6">
                                    <div class="form-group-modern">
                                        <label asp-for="VehicleId" class="form-label-modern">
                                            <i class="bi bi-car-front me-2" style="color: #0070f3;"></i>
                                            Vehicle
                                        </label>
                                        <select asp-for="VehicleId" class="form-control-modern" asp-items="vehicles">
                                            <option value="">Select a vehicle</option>
                                        </select>
                                        <span asp-validation-for="VehicleId" class="text-danger" style="font-size: 0.75rem; margin-top: 0.25rem; display: block;"></span>
                                    </div>
                                </div>
                            </div>

                            <div class="row g-3">
                                <div class="col-md-6">
                                    <div class="form-group-modern">
                                        <label asp-for="QuotedPrice" class="form-label-modern">
                                            <i class="bi bi-tag me-2" style="color: #0070f3;"></i>
                                            Quoted Price
                                        </label>
                                        <input asp-for="QuotedPrice" type="number" step="0.01" class="form-control-modern" placeholder="0.00" />
                                        <span asp-validation-for="QuotedPrice" class="text-danger" style="font-size: 0.75rem; margin-top: 0.25rem; display: block;"></span>
                                    </div>
                                </div>

                                <div class="col-md-6">
                                    <div class="form-group-modern">
                                        <label asp-for="FinalPrice" class="form-label-modern">
                                            <i class="bi bi-cash me-2" style="color: #0070f3;"></i>
                                            Final Price (optional)
                                        </label>
                                        <input asp-for="FinalPrice" type="number" step="0.01" class="form-control-modern" placeholder="0.00" />
                                        <span asp-validation-for="FinalPrice" class="text-danger" style="font-size: 0.75rem; margin-top: 0.25rem; display: block;"></span>
                                    </div>
                                </div>
                            </div>

                            <div class="row g-3">
                                <div class="col-md-6">
                                    <div class="form-group-modern">
                                        <label asp-for="Status" class="form-label-modern">
                                            <i class="bi bi-check-circle me-2" style="color: #0070f3;"></i>
                                            Status
                                        </label>
                                        <select asp-for="Status" class="form-control-modern" asp-items="statusItems"></select>
                                        <span asp-validation-for="Status" class="text-danger" style="font-size: 0.75rem; margin-top: 0.25rem; display: block;"></span>
                                    </div>
                                </div>

                                <div class="col-md-6">
                                    <div class="form-group-modern">
                                        <label asp-for="ValidUntil" class="form-label-modern">
                                            <i class="bi bi-calendar-event me-2" style="color: #0070f3;"></i>
                                            Valid Until
                                        </label>
                                        <input asp-for="ValidUntil" type="date" class="form-control-modern" />
                                        <span asp-validation-for="ValidUntil" class="text-danger" style="font-size: 0.75rem; margin-top: 0.25rem; display: block;"></span>
                                    </div>
                                </div>
                            </div>

                            <div class="form-group-modern">
                                <label asp-for="Remarks" class="form-label-modern">
                                    <i class="bi bi-chat-left-text me-2" style="color: #0070f3;"></i>
                                    Remarks
                                </label>
                                <textarea asp-for="Remarks" class="form-control-modern" rows="4" style="resize: vertical;" placeholder="Add any additional notes or comments..."></textarea>
                                <span asp-validation-for="Remarks" class="text-danger" style="font-size: 0.75rem; margin-top: 0.25rem; display: block;"></span>
                            </div>

                            <div class="d-flex gap-2 mt-4">
                                <button type="submit" class="btn-modern w-100" style="height: 40px; justify-content: center;">
                                    <i class="bi bi-check-lg"></i>
                                    Create Quote
                                </button>
                                <a href="@Url.Action("Index", "Quote")" class="btn-modern-secondary" style="height: 40px; padding: 0 1.5rem; display: inline-flex; align-items: center; justify-content: center; text-decoration: none;">
                                    Cancel
                                </a>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
    <style>
        input[type="date"].form-control-modern {
            color-scheme: dark;
        }

        select.form-control-modern {
            cursor: pointer;
        }
    </style>
}
